!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.NLPDate=t():e.NLPDate=t()}(this,(function(){return function(){"use strict";var e={991:function(e){e.exports=function(){function e(e,t,n,r,a){return e<t||n<t?e>n?n+1:e+1:r===a?t:t+1}return function(t,n){if(t===n)return 0;if(t.length>n.length){var r=t;t=n,n=r}for(var a=t.length,i=n.length;a>0&&t.charCodeAt(a-1)===n.charCodeAt(i-1);)a--,i--;for(var o=0;o<a&&t.charCodeAt(o)===n.charCodeAt(o);)o++;if(i-=o,0==(a-=o)||i<3)return i;var u,s,c,p,l,y,D,T,f,m,h,U,d=0,g=[];for(u=0;u<a;u++)g.push(u+1),g.push(t.charCodeAt(o+u));for(var C=g.length-1;d<i-3;)for(f=n.charCodeAt(o+(s=d)),m=n.charCodeAt(o+(c=d+1)),h=n.charCodeAt(o+(p=d+2)),U=n.charCodeAt(o+(l=d+3)),y=d+=4,u=0;u<C;u+=2)s=e(D=g[u],s,c,f,T=g[u+1]),c=e(s,c,p,m,T),p=e(c,p,l,h,T),y=e(p,l,y,U,T),g[u]=y,l=p,p=c,c=s,s=D;for(;d<i;)for(f=n.charCodeAt(o+(s=d)),y=++d,u=0;u<C;u+=2)D=g[u],g[u]=y=e(D,s,y,f,g[u+1]),s=D;return y}}()},842:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BaseParser=void 0;var r=n(991),a=function(){function e(){}return e.prototype.findTargetWithLevenshtein=function(e,t,n,a){var i=Number.MAX_SAFE_INTEGER,o=null;if(e.forEach((function(e){e.name[t].forEach((function(t){var a=r(t,n);a<i&&(o=e,i=a)}))})),o&&i<Math.max(Math.ceil(.5*n.length),1))return a(o)},e}();t.BaseParser=a},838:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DateUnit=t.DateUnitType=void 0;var r=n(637),a=function(e,t,n){this.key=e,this.milliseconds=t,this.unit=n};t.DateUnitType={UNKNOWN:0,YEAR:1,MONTH:2,DATE:3,HOUR:4,MINUTE:5,SECOND:6,MILLISECOND:7,END_OF_MONTH:8,END_OF_YEAR:9,WEEK_NUMBER:10,YOUBI:11};var i=function(){function e(){}return e.getDetail=function(e){return r.ArrayExtend.first(this.data.filter((function(t){return t.unit==e})))||this.millisecond},e.toMilliseconds=function(e,t){return e*this.getDetail(t).milliseconds},e.data=[new a("year",-1,t.DateUnitType.YEAR),new a("month",-1,t.DateUnitType.MONTH),new a("date",864e5,t.DateUnitType.DATE),new a("hour",36e5,t.DateUnitType.HOUR),new a("minute",6e4,t.DateUnitType.MINUTE),new a("second",1e3,t.DateUnitType.SECOND),new a("ms",1,t.DateUnitType.MILLISECOND),new a("end_of_month",-1,t.DateUnitType.END_OF_MONTH),new a("end_of_year",-1,t.DateUnitType.END_OF_YEAR),new a("day",-1,t.DateUnitType.YOUBI),new a("week",6048e5,t.DateUnitType.WEEK_NUMBER)],e.millisecond=new a("ms",1,t.DateUnitType.MILLISECOND),e}();t.DateUnit=i},241:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PreEscape=void 0;var r=n(663),a=function(){function e(e){var t=new r.TextNormalizer({original:e});this.replaced_text=t.getNormalizedText(),this.template_text=t.getTemplateText()}return e.prototype.withExpandToken=function(){var e=this;return[["（月）","月曜日"],["（火）","火曜日"],["（水）","水曜日"],["（木）","木曜日"],["（金）","金曜日"],["（土）","土曜日"],["（日）","日曜日"]].forEach((function(t){e.replaced_text=e.replaced_text.replace(t[0],"@"+t[1]+"@")})),this},e.prototype.withEraseWhiteSpace=function(){for(var e="",t=this.replaced_text[0],n=0;n<this.replaced_text.length;n++){if(" "==(t=this.replaced_text[n])){var r=this.replaced_text.charCodeAt(n-1),a=this.replaced_text.charCodeAt(n+1);a=NaN==a?0:a,((r=NaN==r?0:r)>127||a>127)&&(t="@")}e+=t}return this.replaced_text=e,this},e.prototype.withEraseWord=function(){return this.replaced_text=this.replaced_text.replace(/[\r\n\t（）「」]/g,"@"),this},e.prototype.withUnnormalyHiragana=function(){return this.template_text.includes("}か年")&&(this.replaced_text=this.replaced_text.replace(/か年/g,"ヵ年")),this.template_text.includes("}か月")&&(this.replaced_text=this.replaced_text.replace(/か月/g,"ヵ月")),this},e.prototype.withNumberValueToSeparated=function(){return this.replaced_text=this.replaced_text.replace(/\d+/g,(function(e,t,n){if(0==t||n.charCodeAt(t-1)<=127)return e;switch(n[t-1]){case"第":return e;default:return"@"+e}})),this},e.prototype.getResult=function(){return this.replaced_text},e}();t.PreEscape=function(e){return new a(e).withExpandToken().withEraseWhiteSpace().withEraseWord().withUnnormalyHiragana().withNumberValueToSeparated().getResult()}},29:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Splitter=void 0;var n=/[ぁ-ん、。　]/mu,r=/[ぁ-ん、。　]/g,a=function(){function e(e){this.text=e,this.escaped_text=e,this.replacement_hash=new Map,this.replacement_index=1}return e.prototype.withEscapeArray=function(e,t){var r=this,a=this.escaped_text;return e.map(t).flat().filter((function(e){return n.test(e)})).sort((function(e,t){return t.length-e.length})).forEach((function(e){if(a.includes(e)){var t="${R:"+r.replacement_index+"}";r.replacement_hash.set(t,e),r.replacement_index++,a=a.replace(e,t)}})),this.escaped_text=a,this},e.prototype.split=function(){var e=this.escaped_text.replace(r,"@");return this.replacement_hash.forEach((function(t,n){e=e.replace(n,t)})),e.split("@").filter((function(e){return e.length>=1}))},e}();t.Splitter=a},663:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.TextNormalizer=void 0;var n=[{target:"０１２３４５６７８９",replace_to:"0123456789"},{target:"零一二三四五六七八九",replace_to:"0123456789"},{target:"ａｂｃｄｅｆｇｈｉｊｋｌｍｎｏｐｑｒｓｔｕｖｗｘｙｚ",replace_to:"abcdefghijklmnopqrstuvwxyz"},{target:"ＡＢＣＤＥＦＧＨＩＪＫＬＭＮＯＰＱＲＳＴＵＶＷＸＹＺ",replace_to:"ABCDEFGHIJKLMNOPQRSTUVWXYZ"}],r=[{condition:function(e){return"曜"==e},list:new Map(Object.entries({"日":0,"月":1,"火":2,"水":3,"木":4,"金":5,"土":6}))}],a=RegExp(/^[0-9]+$/),i=function(){function e(){this.template="",this.parameters=[],this.parameter_temporary="",this.parameter_index=0}return e.prototype.addDecimalCharacter=function(e){this.parameter_temporary+=e},e.prototype.addCharacter=function(e){this.template+=e},e.prototype.flush=function(){this.parameter_temporary.length>=1&&(this.template+="${"+this.parameter_index+"}",this.parameters.push(parseInt(this.parameter_temporary,10)),this.parameter_temporary="",this.parameter_index++)},e.prototype.getTemplateText=function(){return this.template},e.prototype.getParameters=function(){return this.parameters},e}(),o=function(){function e(e){this.result=this.parse(e.normalized_text||this.normalize(e.original||""))}return e.prototype.normalizeCharacter=function(e,t){var a=e[t];if(t+1<e.length){var i=r.filter((function(n){return n.condition(e[t+1])&&n.list.has(a)})).map((function(e){return"@"+e.list.get(a)}));if(i&&i.length>=1)return i[0]}return n.map((function(e){var t=e.target.indexOf(a);if(t>=0)return e.replace_to[t]})).find((function(e){return e}))||a},e.prototype.normalize=function(e){for(var t="",n=0;n<e.length;n++)t+=this.normalizeCharacter(e,n);return t},e.prototype.parse=function(e){for(var t,n=new i,r=0;r<e.length;r++){var o=e[r];"@"==o?n.flush():(t=o,a.test(t)?n.addDecimalCharacter(o):(n.flush(),n.addCharacter(o)))}return n.flush(),{normalized_text:e,template:n.getTemplateText(),parameters:n.getParameters()}},e.prototype.getTemplateText=function(){return this.result.template},e.prototype.getTemplateParameters=function(){return this.result.parameters},e.prototype.getNormalizedText=function(){return this.result.normalized_text},e}();t.TextNormalizer=o},966:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TimeZoneQueryParser=t.TimeZoneWrapper=void 0;var r=n(663),a=new Map(Object.entries({UTC:"UTC+00:00",GMT:"UTC+00:00","Etc/GMT+11":"UTC-11:00","Pacific/Honolulu":"UTC-10:00","America/Anchorage":"UTC-09:00","America/Santa_Isabel":"UTC-08:00","America/Los_Angeles":"UTC-08:00","America/Chihuahua":"UTC-07:00","America/Phoenix":"UTC-07:00","America/Denver":"UTC-07:00","America/Guatemala":"UTC-06:00","America/Chicago":"UTC-06:00","America/Regina":"UTC-06:00","America/Mexico_City":"UTC-06:00","America/Bogota":"UTC-05:00","America/Indiana/Indianapolis":"UTC-05:00","America/New_York":"UTC-05:00","America/Caracas":"UTC-04:30","America/Halifax":"UTC-04:00","America/Asuncion":"UTC-04:00","America/La_Paz":"UTC-04:00","America/Cuiaba":"UTC-04:00","America/Santiago":"UTC-04:00","America/St_Johns":"UTC-03:30","America/Sao_Paulo":"UTC-03:00","America/Godthab":"UTC-03:00","America/Cayenne":"UTC-03:00","America/Argentina/Buenos_Aires":"UTC-03:00","America/Montevideo":"UTC-03:00","Etc/GMT+2":"UTC-02:00","Atlantic/Cape_Verde":"UTC-01:00","Atlantic/Azores":"UTC-01:00","Africa/Casablanca":"UTC+00:00","Atlantic/Reykjavik":"UTC+00:00","Europe/London":"UTC+00:00","Etc/GMT":"UTC+00:00","Europe/Berlin":"UTC+01:00","Europe/Paris":"UTC+01:00","Africa/Lagos":"UTC+01:00","Europe/Budapest":"UTC+01:00","Europe/Warsaw":"UTC+01:00","Africa/Windhoek":"UTC+01:00","Europe/Istanbul":"UTC+02:00","Europe/Kiev":"UTC+02:00","Africa/Cairo":"UTC+02:00","Asia/Damascus":"UTC+02:00","Asia/Amman":"UTC+02:00","Africa/Johannesburg":"UTC+02:00","Asia/Jerusalem":"UTC+02:00","Asia/Beirut":"UTC+02:00","Asia/Baghdad":"UTC+03:00","Europe/Minsk":"UTC+03:00","Asia/Riyadh":"UTC+03:00","Africa/Nairobi":"UTC+03:00","Asia/Tehran":"UTC+03:30","Europe/Moscow":"UTC+04:00","Asia/Tbilisi":"UTC+04:00","Asia/Yerevan":"UTC+04:00","Asia/Dubai":"UTC+04:00","Asia/Baku":"UTC+04:00","Indian/Mauritius":"UTC+04:00","Asia/Kabul":"UTC+04:30","Asia/Tashkent":"UTC+05:00","Asia/Karachi":"UTC+05:00","Asia/Colombo":"UTC+05:30","Asia/Kolkata":"UTC+05:30","Asia/Kathmandu":"UTC+05:45","Asia/Almaty":"UTC+06:00","Asia/Dhaka":"UTC+06:00","Asia/Yekaterinburg":"UTC+06:00","Asia/Yangon":"UTC+06:30","Asia/Bangkok":"UTC+07:00","Asia/Novosibirsk":"UTC+07:00","Asia/Krasnoyarsk":"UTC+08:00","Asia/Ulaanbaatar":"UTC+08:00","Asia/Shanghai":"UTC+08:00","Australia/Perth":"UTC+08:00","Asia/Singapore":"UTC+08:00","Asia/Taipei":"UTC+08:00","Asia/Irkutsk":"UTC+09:00","Asia/Seoul":"UTC+09:00","Asia/Tokyo":"UTC+09:00","Australia/Darwin":"UTC+09:30","Australia/Adelaide":"UTC+09:30","Australia/Hobart":"UTC+10:00","Asia/Yakutsk":"UTC+10:00","Australia/Brisbane":"UTC+10:00","Pacific/Port_Moresby":"UTC+10:00","Australia/Sydney":"UTC+10:00","Asia/Vladivostok":"UTC+11:00","Pacific/Guadalcanal":"UTC+11:00","Etc/GMT-12":"UTC+12:00","Pacific/Fiji":"UTC+12:00","Asia/Magadan":"UTC+12:00","Pacific/Auckland":"UTC+12:00","Pacific/Tongatapu":"UTC+13:00","Pacific/Apia":"UTC+13:00"})),i=function(e){this.name=e.name,this.parser=e.parser},o=function(e,t){return 1e3*(60*e*60+60*t)},u=function(e,t,n){return(n?"+":"-")+("00"+e).slice(-2)+":"+("00"+t).slice(-2)},s=[new i({name:["UTC+${0}:${1}","+${0}:${1}"],parser:function(e){return{stringValue:u(e[0],e[1],!0),ms:o(e[0],e[1])}}}),new i({name:["UTC-${0}:${1}","-${0}:${1}"],parser:function(e){return{stringValue:u(e[0],e[1],!1),ms:-o(e[0],e[1])}}})],c=function(){function e(e){this.time_zone_milliseconds=0,this.time_zone_string="Z",this.time_zone_template="",this.time_zone_parameter=[],this.time_zone_original=e;var t=new r.TextNormalizer({original:a.get(e)||e}),n=s.find((function(e){return e.name.indexOf(t.getTemplateText())>=0}));if(n){var i=n.parser(t.getTemplateParameters());this.time_zone_milliseconds=i.ms,this.time_zone_string=i.stringValue,this.time_zone_template=t.getTemplateText(),this.time_zone_parameter=t.getTemplateParameters()}}return e.prototype.getTime=function(){return this.time_zone_milliseconds},e.prototype.getTimeZoneString=function(){return this.time_zone_string},e.fromHourMinutes=function(t,n,r){return new e(t+("00"+n).slice(-2)+":"+("00"+r).slice(-2))},e}();t.TimeZoneWrapper=c,t.TimeZoneQueryParser=function(e){return new c(e)}},383:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Wareki=void 0;var n=function(){function e(e){this.display=e.display,this.year=e.year,this.month=e.month,this.date=e.date}return e.prototype.toFixedDate=function(){return e.fixedDate(this.year,this.month,this.date)},e.prototype.getYearTo=function(e){return this.display+(e-this.year+1)},e.fixedDate=function(e,t,n){var r=1e3*e;return(r+=31*t)+n},e}(),r=[{display:"令和",year:2019,month:5,date:1},{display:"平成",year:1989,month:1,date:8},{display:"昭和",year:1926,month:12,date:25},{display:"大正",year:1912,month:7,date:30},{display:"明治",year:1868,month:1,date:25}],a=function(){function e(){}return e.parse=function(e){var t=n.fixedDate(e.getFullYear(),e.getMonth(),e.getDate()),a=void 0;return r.map((function(e){return new n(e)})).forEach((function(n){void 0===a&&n.toFixedDate()<=t&&(a=n.getYearTo(e.getFullYear()))})),a||"西暦"+e.getFullYear()},e.toFullYear=function(e,t){var a=void 0;return r.map((function(e){return new n(e)})).filter((function(t){return t.display==e})).forEach((function(e){a=e.year+t-1})),a},e}();t.Wareki=a},10:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.WeekDayUnit=t.WeekDayType=void 0,t.WeekDayType={Sun:0,Mon:1,Tue:2,Wed:3,Thu:4,Fri:5,Sat:6};var n={name:{jp:["日","月","火","水","木","金","土"]}},r=function(){function e(){}return e.getWeekDay=function(e){for(;e<0;)e+=7;switch(e%7){case t.WeekDayType.Sun:default:return t.WeekDayType.Sun;case t.WeekDayType.Mon:return t.WeekDayType.Mon;case t.WeekDayType.Tue:return t.WeekDayType.Tue;case t.WeekDayType.Wed:return t.WeekDayType.Wed;case t.WeekDayType.Thu:return t.WeekDayType.Thu;case t.WeekDayType.Fri:return t.WeekDayType.Fri;case t.WeekDayType.Sat:return t.WeekDayType.Sat}},e.getWeekDayDelta=function(e,t){return this.getWeekDay(t-e)},e.toWeekDayString=function(e,t){return n.name[e][t]},e}();t.WeekDayUnit=r},528:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Config=void 0;var r=n(966),a=n(771),i=n(713),o=function(){function e(e){this.time_zone_query="UTC",this.language="jp",this.mode="",this.epoch_time_milliseconds=0;var t=i.DefaultConfig.get(i.DefaultLanguage)||{},n=e||{};this.setTimeZone(n.time_zone||t.time_zone||"UTC"),this.setLanguage(n.language||t.language||"jp"),this.setEpochTimeMilliseconds(n.epoch_time_milliseconds||t.epoch_time_milliseconds||-1),this.setMode(n.mode||t.mode||"static")}return e.prototype.toJson=function(){return{time_zone:this.time_zone_query,language:this.language}},e.prototype.setTimeZone=function(e){this.time_zone_query=e,this.time_zone=r.TimeZoneQueryParser(e)},e.prototype.setLanguage=function(e){this.language=e},e.prototype.setMode=function(e){this.mode=e},e.prototype.setEpochTimeMilliseconds=function(e){this.epoch_time_milliseconds=e<=-1?-1:e},e.prototype.getTimeZone=function(){return null==this.time_zone?new r.TimeZoneWrapper("UTC"):this.time_zone},e.prototype.getLanguage=function(){return this.language},e.prototype.getEpochTimeMilliseconds=function(){return this.epoch_time_milliseconds<=-1?a.DateUtility.nowEpoch():this.epoch_time_milliseconds},e.prototype.isDynamic=function(){return"dynamic"==this.mode},e}();t.Config=o},713:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultConfig=t.DefaultLanguage=void 0,t.DefaultLanguage="jp",t.DefaultConfig=new Map(Object.entries({jp:{time_zone:"Asia/Tokyo",language:"jp",mode:"static"}}))},619:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(910),a=n(528),i=n(29),o=n(241),u=n(506),s=n(716);t.default=function(e,t){var n=new a.Config(t);return new r.DateParser(function(e,t){return"string"==typeof e?new i.Splitter(o.PreEscape(e)).withEscapeArray(u.SubjectQueryList,(function(e){return e.name[t.getLanguage()]})).withEscapeArray(s.PredicateList,(function(e){return e.name[t.getLanguage()]})).split():Array.isArray(e)?e.map((function(e){return o.PreEscape(e)})):[""+e]}(e,n),n)}},890:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DateFormat=t.DateFormatQueryList=t.DateFormatQuery=void 0;var r=n(637),a=function(e){this.name=e.name,this.extra=r.ArrayExtend.toMap(e.extra)};t.DateFormatQuery=a,t.DateFormatQueryList=[new a({name:{jp:["スラッシュ","コロン"]},extra:[{key:"type",value:"slash"}]}),new a({name:{jp:["ハイフン"]},extra:[{key:"type",value:"hyphen"}]}),new a({name:{jp:["ISO8601","ISO","アイエスオー"]},extra:[{key:"type",value:"iso"}]}),new a({name:{jp:["日本語","漢字"]},extra:[{key:"type",value:"japanese"}]}),new a({name:{jp:["和暦","令和","平成","昭和","大正","明治"]},extra:[{key:"format.year",value:"w"},{key:"type",value:"japanese"}]}),new a({name:{jp:["区切りなし","区切り文字なし","数字","区切らない"]},extra:[{key:"type",value:"none"}]}),new a({name:{jp:["年"]},extra:[{key:"unit.year",value:"true"}]}),new a({name:{jp:["月"]},extra:[{key:"unit.month",value:"true"}]}),new a({name:{jp:["日"]},extra:[{key:"unit.date",value:"true"}]}),new a({name:{jp:["時"]},extra:[{key:"unit.hour",value:"true"}]}),new a({name:{jp:["分"]},extra:[{key:"unit.minute",value:"true"}]}),new a({name:{jp:["秒"]},extra:[{key:"unit.second",value:"true"}]}),new a({name:{jp:["ミリ秒"]},extra:[{key:"unit.millisecond",value:"true"}]}),new a({name:{jp:["曜日"]},extra:[{key:"unit.weekday",value:"true"}]}),new a({name:{jp:["エポック","ユニックス","エポック秒","ユニックス時間","ユニックスタイム"]},extra:[{key:"unit.epoch",value:"true"}]}),new a({name:{jp:["エポックミリ","エポックミリ秒"]},extra:[{key:"unit.epoch_ms",value:"true"}]})];var i=function(){function e(){}return e.getQueryMap=function(e){var t=new Map;return e.forEach((function(e){e.extra.forEach((function(e,n){t.set(n,e)}))})),t},e.getDateFormatFromMap=function(e){var t="";switch(e.get("type")||"japanese"){case"iso":default:t="[{year}][-{month}][-{date}][T{hour}][:{minute}][:{second}][.{millisecond}][{timezone}]",e.set("unit.year","true"),e.set("unit.month","true"),e.set("unit.date","true"),e.set("unit.hour","true"),e.set("unit.minute","true"),e.set("unit.second","true"),e.set("unit.timezone","true");break;case"hyphen":t="[{year}][-{month}][-{date}][ {hour}][:{minute}][:{second}][.{millisecond}][ {weekday}曜日]";break;case"slash":t="[{year}][/{month}][/{date}][ {hour}][:{minute}][:{second}][.{millisecond}][ {weekday}曜日]";break;case"none":t="[{year}][{month}][{date}][{hour}][{minute}][{second}][{millisecond}]";break;case"japanese":t="[{year}年][{month}月][{date}日][ {hour}時][{minute}分][{second}秒][.{millisecond}ミリ秒][{weekday}曜日]"}var n="",a=[["year",e.get("format.year")||"YYYY"],["month",e.get("format.month")||"MM"],["date",e.get("format.date")||"dd"],["hour",e.get("format.hour")||"HH"],["minute",e.get("format.minute")||"mm"],["second",e.get("format.second")||"ss"],["millisecond",e.get("format.millisecond")||"fff"],["weekday",e.get("format.weekday")||"EEE"],["timezone",e.get("format.timezone")||"Z"],["epoch",e.get("format.epoch")||"p"],["epoch_ms",e.get("format.epoch_ms")||"P"]],i=!1,o=Array.from(e.keys()).filter((function(e){return e.startsWith("unit.")})).length;return a.forEach((function(a){var u=a[0],s=a[1];o<=1&&(s=s.substring(0,1)),e.has("unit."+u)&&(n+=function(e,t,n,a){var i=r.ArrayExtend.first(t.split(/\[|\]/g).filter((function(t){return t.indexOf("{"+e+"}")>=0})));return i&&i.indexOf("{")>=0?(a||(i=i.substring(i.indexOf("{"))),i.replace("{"+e+"}",n)):n}(u,t,s,i),i=!0)})),n},e}();t.DateFormat=i},910:function(e,t,n){var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.DateParser=void 0;var i=n(506),o=n(890),u=n(771),s=n(663),c=n(716),p=n(842),l=n(241),y=n(29),D=n(637),T=function(e){function t(t,n){var r=e.call(this)||this;return r.query=t,r.config=n,r.static_epoch_time_millisecond=r.config.getEpochTimeMilliseconds(),r.static_result=r.parseQuery(r.static_epoch_time_millisecond,t),r}return a(t,e),t.prototype.subject=function(e){var t=this,n=new s.TextNormalizer({normalized_text:e});return this.findTargetWithLevenshtein(i.SubjectQueryList,this.config.getLanguage(),n.getTemplateText(),(function(e){return e.parser(n.getTemplateParameters(),t.config)}))},t.prototype.isImplicitDate=function(e){if(0==e.length)return!0;for(var t=0;t<e.length;t++)if((e.codePointAt(t)||0)>127)return!0;return!1},t.prototype.predicate=function(e,t,n){var r=this,a=new s.TextNormalizer({normalized_text:e}),i=null;return this.findTargetWithLevenshtein(c.PredicateList,this.config.getLanguage(),a.getTemplateText(),(function(e){return t=e.parser(t,a.getTemplateParameters(),r.config,n),(i=e).extra.set("argv",JSON.stringify(a.getTemplateParameters())),t})),{date:t,predicate:i}},t.prototype.parseQuery=function(e,t){var n=0,r=void 0,a=D.ArrayExtend.first(t)||"";if(this.isImplicitDate(a)?r=u.DateUtility.dateFromEpoch(e,this.config.getTimeZone()):(n=1,r=this.subject(a)),r&&null!=t)for(var i=[],o=n;o<t.length;o++)if(t[o].length>=1){var s=t[o],c=this.predicate(s,r,i);c.predicate&&(r=c.date,i.push(c.predicate))}return r},t.prototype.getDateWrapper=function(){return this.config.isDynamic()?this.parseQuery(u.DateUtility.nowEpoch(),this.query):this.static_result},t.prototype.asDate=function(){var e;return null===(e=this.getDateWrapper())||void 0===e?void 0:e.getLocalDate()},t.prototype.asString=function(e){var t=this,n=this.getDateWrapper();if(void 0!==n){if(e&&e.startsWith("[")&&e.endsWith("]"))return u.DateUtility.format(n,e.substring(1,e.length-1),this.config);var r="",a=["日本語","エポック秒","エポックミリ秒","ユニックス時間","ミリ秒","曜日","年","月","日","時","分","秒"].reduce((function(e,t){return e.indexOf(t)>=0&&(r+="@"+t),e.replace(t,"")}),e||"ISO8601")+r,i=[];new y.Splitter(l.PreEscape(a)).withEscapeArray(o.DateFormatQueryList,(function(e){return e.name[t.config.getLanguage()]})).split().filter((function(e){return e.length>=1})).forEach((function(e){return t.findTargetWithLevenshtein(o.DateFormatQueryList,t.config.getLanguage(),e,(function(e){return i.push(e)}))}));var s=o.DateFormat.getQueryMap(i);return u.DateUtility.format(n,o.DateFormat.getDateFormatFromMap(s),this.config)}},t.prototype.asNumber=function(e){var t;try{return parseInt(this.asString("数字の"+e)||"ERROR",10)}catch(e){return(null===(t=this.getDateWrapper())||void 0===t?void 0:t.getTime(!0))||0}},t}(p.BaseParser);t.DateParser=T},716:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PredicateList=t.Predicate=void 0;var r=n(771),a=n(867),i=n(838),o=n(10),u=n(637),s=n(383),c=function(e){this.name=e.name,this.parser=e.parser,this.extra=u.ArrayExtend.toMap(e.extra)};function p(e,t,n){var o=new Date(0);o.setUTCMilliseconds(e.getEpochTimeMilliseconds()+e.getTimeZone().getTime()+(t.milliseconds||0));var u=new Map,s=o.getUTCFullYear()+(t.year||0),c=o.getUTCMonth()+1+(t.month||0),p=Math.min(o.getUTCDate(),r.DateUtility.maxDateInCalendar(s,c-1));u.set(i.DateUnitType.YEAR,s),u.set(i.DateUnitType.MONTH,c),u.set(i.DateUnitType.DATE,p),u.set(i.DateUnitType.HOUR,o.getUTCHours()),u.set(i.DateUnitType.MINUTE,o.getUTCMinutes()),u.set(i.DateUnitType.SECOND,o.getUTCSeconds()),u.set(i.DateUnitType.MILLISECOND,o.getUTCMilliseconds());var l=[];return u.forEach((function(e,t){t<=n&&l.push(new a.DateControl.Set(t,e))})),l}function l(e,t){return void 0===t&&(t=1),e&&e.length>=t?e[e.length-t].extra:new Map}t.Predicate=c,t.PredicateList=[new c({name:{jp:["${0}日前"]},parser:function(e,t,n,o){return r.DateUtility.control(e,[new a.DateControl.Add(i.DateUnitType.DATE,-t[0])])}}),new c({name:{jp:["${0}年前"]},parser:function(e,t,n,o){return r.DateUtility.control(e,[new a.DateControl.Add(i.DateUnitType.YEAR,-t[0])])}}),new c({name:{jp:["${0}週間前","${0}週前"]},parser:function(e,t,n,o){return r.DateUtility.control(e,[new a.DateControl.Add(i.DateUnitType.DATE,7*-t[0])])}}),new c({name:{jp:["${0}時間前"]},parser:function(e,t,n,o){return r.DateUtility.control(e,[new a.DateControl.Add(i.DateUnitType.HOUR,-t[0])])}}),new c({name:{jp:["${0}分前"]},parser:function(e,t,n,o){return r.DateUtility.control(e,[new a.DateControl.Add(i.DateUnitType.MINUTE,-t[0])])}}),new c({name:{jp:["${0}秒前"]},parser:function(e,t,n,o){return r.DateUtility.control(e,[new a.DateControl.Add(i.DateUnitType.SECOND,-t[0])])}}),new c({name:{jp:["${0}日後"]},parser:function(e,t,n,o){return r.DateUtility.control(e,[new a.DateControl.Add(i.DateUnitType.DATE,t[0])])}}),new c({name:{jp:["${0}月後","${0}カ月後","${0}ヶ月後","${0}ヵ月後","${0}ケ月後"]},parser:function(e,t,n,o){return r.DateUtility.control(e,[new a.DateControl.Add(i.DateUnitType.MONTH,t[0])])}}),new c({name:{jp:["${0}月前","${0}カ月前","${0}ヶ月前","${0}ヵ月前","${0}ケ月前"]},parser:function(e,t,n,o){return r.DateUtility.control(e,[new a.DateControl.Add(i.DateUnitType.MONTH,-t[0])])}}),new c({name:{jp:["${0}年後"]},parser:function(e,t,n,o){return r.DateUtility.control(e,[new a.DateControl.Add(i.DateUnitType.YEAR,t[0])])}}),new c({name:{jp:["${0}週間後","${0}週後"]},parser:function(e,t,n,o){return r.DateUtility.control(e,[new a.DateControl.Add(i.DateUnitType.DATE,7*t[0])])}}),new c({name:{jp:["${0}時間後"]},parser:function(e,t,n,o){return r.DateUtility.control(e,[new a.DateControl.Add(i.DateUnitType.HOUR,t[0])])}}),new c({name:{jp:["${0}分後"]},parser:function(e,t,n,o){return r.DateUtility.control(e,[new a.DateControl.Add(i.DateUnitType.MINUTE,t[0])])}}),new c({name:{jp:["${0}秒後"]},parser:function(e,t,n,o){return r.DateUtility.control(e,[new a.DateControl.Add(i.DateUnitType.SECOND,t[0])])}}),new c({name:{jp:["今日","きょう"]},parser:function(e,t,n,a){return r.DateUtility.control(e,p(n,{milliseconds:i.DateUnit.toMilliseconds(0,i.DateUnitType.DATE)},i.DateUnitType.DATE))}}),new c({name:{jp:["現在","今","今頃","げんざい","いま","いまごろ"]},parser:function(e,t,n,a){return r.DateUtility.control(e,p(n,{milliseconds:i.DateUnit.toMilliseconds(0,i.DateUnitType.DATE)},i.DateUnitType.MILLISECOND).filter((function(e){return e.unit>=i.DateUnitType.HOUR})))}}),new c({name:{jp:["来年"]},parser:function(e,t,n,a){return r.DateUtility.control(e,p(n,{year:1},i.DateUnitType.DATE))}}),new c({name:{jp:["再来年","さ来年"]},parser:function(e,t,n,a){return r.DateUtility.control(e,p(n,{year:2},i.DateUnitType.DATE))}}),new c({name:{jp:["来月"]},parser:function(e,t,n,a){return r.DateUtility.control(e,p(n,{month:1},i.DateUnitType.DATE))}}),new c({name:{jp:["今月"]},parser:function(e,t,n,a){return r.DateUtility.control(e,p(n,{month:0},i.DateUnitType.DATE))}}),new c({name:{jp:["今年"]},parser:function(e,t,n,a){return r.DateUtility.control(e,p(n,{year:0},i.DateUnitType.DATE))}}),new c({name:{jp:["再来月","さ来月"]},parser:function(e,t,n,a){return r.DateUtility.control(e,p(n,{month:2},i.DateUnitType.DATE))}}),new c({name:{jp:["明日","あした","あす"]},parser:function(e,t,n,a){return r.DateUtility.control(e,p(n,{milliseconds:i.DateUnit.toMilliseconds(1,i.DateUnitType.DATE)},i.DateUnitType.DATE))}}),new c({name:{jp:["明後日","あさって"]},parser:function(e,t,n,a){return r.DateUtility.control(e,p(n,{milliseconds:i.DateUnit.toMilliseconds(2,i.DateUnitType.DATE)},i.DateUnitType.DATE))}}),new c({name:{jp:["しあさって"]},parser:function(e,t,n,a){return r.DateUtility.control(e,p(n,{milliseconds:i.DateUnit.toMilliseconds(3,i.DateUnitType.DATE)},i.DateUnitType.DATE))}}),new c({name:{jp:["やのあさって","やまあさって"]},parser:function(e,t,n,a){return r.DateUtility.control(e,p(n,{milliseconds:i.DateUnit.toMilliseconds(4,i.DateUnitType.DATE)},i.DateUnitType.DATE))}}),new c({name:{jp:["去年","昨年"]},parser:function(e,t,n,a){return r.DateUtility.control(e,p(n,{year:-1},i.DateUnitType.DATE))}}),new c({name:{jp:["${0}昨年","おととし"]},parser:function(e,t,n,a){return r.DateUtility.control(e,p(n,{year:-2},i.DateUnitType.DATE))}}),new c({name:{jp:["先月"]},parser:function(e,t,n,a){return r.DateUtility.control(e,p(n,{month:-1},i.DateUnitType.DATE))}}),new c({name:{jp:["昨日"]},parser:function(e,t,n,a){return r.DateUtility.control(e,p(n,{milliseconds:i.DateUnit.toMilliseconds(-1,i.DateUnitType.DATE)},i.DateUnitType.DATE))}}),new c({name:{jp:["${0}昨日","おととい","おとつい","いっさくじつ"]},parser:function(e,t,n,a){return r.DateUtility.control(e,p(n,{milliseconds:i.DateUnit.toMilliseconds(-2,i.DateUnitType.DATE)},i.DateUnitType.DATE))}}),new c({name:{jp:["月末"]},parser:function(e,t,n,o){return r.DateUtility.control(e,[new a.DateControl.Set(i.DateUnitType.END_OF_MONTH,0)])}}),new c({name:{jp:["年末"]},parser:function(e,t,n,o){return r.DateUtility.control(e,[new a.DateControl.Set(i.DateUnitType.END_OF_YEAR,0)])}}),new c({name:{jp:["${0}年"]},parser:function(e,t,n,o){var u=t[0],c=l(o).get("wareki");if(c){var p=s.Wareki.toFullYear(c,u);p&&(u=p)}return r.DateUtility.control(e,[new a.DateControl.Set(i.DateUnitType.YEAR,u)])}}),new c({name:{jp:["令和","令和元年"]},extra:[{key:"wareki",value:"令和"}],parser:function(e,t,n,o){var u=s.Wareki.toFullYear("令和",1);return r.DateUtility.control(e,u?[new a.DateControl.Set(i.DateUnitType.YEAR,u)]:[])}}),new c({name:{jp:["平成","平成元年"]},extra:[{key:"wareki",value:"平成"}],parser:function(e,t,n,o){var u=s.Wareki.toFullYear("平成",1);return r.DateUtility.control(e,u?[new a.DateControl.Set(i.DateUnitType.YEAR,u)]:[])}}),new c({name:{jp:["昭和","昭和元年"]},extra:[{key:"wareki",value:"昭和"}],parser:function(e,t,n,o){var u=s.Wareki.toFullYear("昭和",1);return r.DateUtility.control(e,u?[new a.DateControl.Set(i.DateUnitType.YEAR,u)]:[])}}),new c({name:{jp:["大正","大正元年"]},extra:[{key:"wareki",value:"大正"}],parser:function(e,t,n,o){var u=s.Wareki.toFullYear("大正",1);return r.DateUtility.control(e,u?[new a.DateControl.Set(i.DateUnitType.YEAR,u)]:[])}}),new c({name:{jp:["明治","明治元年"]},extra:[{key:"wareki",value:"明治"}],parser:function(e,t,n,o){var u=s.Wareki.toFullYear("明治",1);return r.DateUtility.control(e,u?[new a.DateControl.Set(i.DateUnitType.YEAR,u)]:[])}}),new c({name:{jp:["${0}月"]},parser:function(e,t,n,o){return r.DateUtility.control(e,[new a.DateControl.Set(i.DateUnitType.MONTH,t[0])])}}),new c({name:{jp:["${0}日"]},parser:function(e,t,n,o){return r.DateUtility.control(e,[new a.DateControl.Set(i.DateUnitType.DATE,t[0])])}}),new c({name:{jp:["${0}時"]},parser:function(e,t,n,o){var u=l(o).get("ampm");return r.DateUtility.control(e,[new a.DateControl.Set(i.DateUnitType.HOUR,t[0]+parseInt(u||"0"))])}}),new c({name:{jp:["午前","午前中","AM"]},extra:[{key:"ampm",value:"0"}],parser:function(e,t,n,r){return e}}),new c({name:{jp:["午後","PM"]},extra:[{key:"ampm",value:"12"}],parser:function(e,t,n,r){return e}}),new c({name:{jp:["${0}分"]},parser:function(e,t,n,o){return r.DateUtility.control(e,[new a.DateControl.Set(i.DateUnitType.MINUTE,t[0])])}}),new c({name:{jp:["${0}:${1}","AM${0}:${1}"]},parser:function(e,t,n,o){return r.DateUtility.control(e,[new a.DateControl.Set(i.DateUnitType.HOUR,t[0]),new a.DateControl.Set(i.DateUnitType.MINUTE,t[1])])}}),new c({name:{jp:["PM${0}:${1}"]},parser:function(e,t,n,o){return r.DateUtility.control(e,[new a.DateControl.Set(i.DateUnitType.HOUR,t[0]+12),new a.DateControl.Set(i.DateUnitType.MINUTE,t[1])])}}),new c({name:{jp:["${0}秒"]},parser:function(e,t,n,o){return r.DateUtility.control(e,[new a.DateControl.Set(i.DateUnitType.SECOND,t[0])])}}),new c({name:{jp:["${0}ミリ秒"]},parser:function(e,t,n,o){return r.DateUtility.control(e,[new a.DateControl.Set(i.DateUnitType.MILLISECOND,t[0])])}}),new c({name:{jp:["${0}曜","${0}曜日"]},parser:function(e,t,n,s){var c=l(s).get("index_number"),p=[new a.DateControl.Set(i.DateUnitType.YOUBI,t[0])];if(c){var y=l(s).get("argv"),D=l(s,2).get("relation"),T=JSON.parse(y||'["0"]')[0];if(u.ArrayExtend.insert(p,0,new a.DateControl.Set(i.DateUnitType.WEEK_NUMBER,T)),D){var f=0,m=new Date(e.getTime(!1));m.setUTCDate(1);var h=r.DateUtility.dateFromWeekNumberAndWeekDay(o.WeekDayUnit.getWeekDay(m.getUTCDay()),o.WeekDayUnit.getWeekDay(t[0]),T);e.getDate()<h?"previous"==D&&(f=-1):"next"==D&&(f=1),0!=f&&u.ArrayExtend.insert(p,0,new a.DateControl.Add(i.DateUnitType.MONTH,f))}}else if(D=l(s).get("relation")){var U=0;e.getWeekDay()<o.WeekDayUnit.getWeekDay(t[0])?"previous"==D&&(U=-1):"next"==D&&(U=1),0!=U&&p.push(new a.DateControl.Add(i.DateUnitType.WEEK_NUMBER,U))}return r.DateUtility.control(e,p)}}),new c({name:{jp:["第${0}"]},extra:[{key:"index_number",value:"argv"}],parser:function(e,t,n,r){return e}}),new c({name:{jp:["次","今度"]},extra:[{key:"relation",value:"next"}],parser:function(e,t,n,r){return e}}),new c({name:{jp:["前","以前"]},extra:[{key:"relation",value:"previous"}],parser:function(e,t,n,r){return e}})]},506:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SubjectQueryList=t.SubjectQuery=void 0;var r=n(771),a=n(867),i=n(966),o=n(838),u=function(e){this.name=e.name,this.parser=e.parser};t.SubjectQuery=u;var s={EPOCH_TIME:10,EPOCH_MILLISECONDS_TIME:13,YEAR_MONTH_DATE:8,YEAR_MONTH_DATE_HOUR_MINUTE_SECOND:14};t.SubjectQueryList=[new u({name:{jp:["${0}"]},parser:function(e,t){switch(n=new String(e[0]).length,Object.values(s).find((function(e){return e==n}))){case s.EPOCH_MILLISECONDS_TIME:return r.DateUtility.dateFromEpoch(e[0],t.getTimeZone());case s.EPOCH_TIME:return r.DateUtility.dateFromEpoch(o.DateUnit.toMilliseconds(e[0],o.DateUnitType.SECOND),t.getTimeZone());case s.YEAR_MONTH_DATE:return r.DateUtility.dateFromSet(t.getTimeZone(),[new a.DateControl.Set(o.DateUnitType.YEAR,parseInt(new String(e[0]).substr(0,4),10)),new a.DateControl.Set(o.DateUnitType.MONTH,parseInt(new String(e[0]).substr(4,2),10)),new a.DateControl.Set(o.DateUnitType.DATE,parseInt(new String(e[0]).substr(6,2),10))]);case s.YEAR_MONTH_DATE_HOUR_MINUTE_SECOND:return r.DateUtility.dateFromSet(t.getTimeZone(),[new a.DateControl.Set(o.DateUnitType.YEAR,parseInt(new String(e[0]).substr(0,4),10)),new a.DateControl.Set(o.DateUnitType.MONTH,parseInt(new String(e[0]).substr(4,2),10)),new a.DateControl.Set(o.DateUnitType.DATE,parseInt(new String(e[0]).substr(6,2),10)),new a.DateControl.Set(o.DateUnitType.HOUR,parseInt(new String(e[0]).substr(8,2),10)),new a.DateControl.Set(o.DateUnitType.MINUTE,parseInt(new String(e[0]).substr(10,2),10)),new a.DateControl.Set(o.DateUnitType.SECOND,parseInt(new String(e[0]).substr(12,2),10))]);default:return r.DateUtility.dateFromEpoch(t.getEpochTimeMilliseconds(),t.getTimeZone())}var n}}),new u({name:{jp:["${0}/${1}/${2}","${0}-${1}-${2}"]},parser:function(e,t){return r.DateUtility.dateFromSet(t.getTimeZone(),[new a.DateControl.Set(o.DateUnitType.YEAR,e[0]),new a.DateControl.Set(o.DateUnitType.MONTH,e[1]),new a.DateControl.Set(o.DateUnitType.DATE,e[2])])}}),new u({name:{jp:["${0}/${1}","${0}-${1}"]},parser:function(e,t){if(e[0]>=13)return r.DateUtility.dateFromSet(t.getTimeZone(),[new a.DateControl.Set(o.DateUnitType.YEAR,e[0]),new a.DateControl.Set(o.DateUnitType.MONTH,e[1])]);var n=r.DateUtility.dateFromEpoch(t.getEpochTimeMilliseconds(),t.getTimeZone());return r.DateUtility.dateFromSet(t.getTimeZone(),[new a.DateControl.Set(o.DateUnitType.YEAR,n.getFullYear()),new a.DateControl.Set(o.DateUnitType.MONTH,e[0]),new a.DateControl.Set(o.DateUnitType.DATE,e[1])])}}),new u({name:{jp:["${0}/${1}/${2} ${3}:${4}:${5}","${0}/${1}/${2}T${3}:${4}:${5}","${0}-${1}-${2} ${3}:${4}:${5}"]},parser:function(e,t){return r.DateUtility.dateFromSet(t.getTimeZone(),[new a.DateControl.Set(o.DateUnitType.YEAR,e[0]),new a.DateControl.Set(o.DateUnitType.MONTH,e[1]),new a.DateControl.Set(o.DateUnitType.DATE,e[2]),new a.DateControl.Set(o.DateUnitType.HOUR,e[3]),new a.DateControl.Set(o.DateUnitType.MINUTE,e[4]),new a.DateControl.Set(o.DateUnitType.SECOND,e[5])])}}),new u({name:{jp:["${0}/${1}/${2}T${3}:${4}:${5}+${6}:${7}","${0}-${1}-${2}T${3}:${4}:${5}+${6}:${7}"]},parser:function(e,t){return r.DateUtility.dateFromSet(i.TimeZoneWrapper.fromHourMinutes("UTC+",e[6],e[7]),[new a.DateControl.Set(o.DateUnitType.YEAR,e[0]),new a.DateControl.Set(o.DateUnitType.MONTH,e[1]),new a.DateControl.Set(o.DateUnitType.DATE,e[2]),new a.DateControl.Set(o.DateUnitType.HOUR,e[3]),new a.DateControl.Set(o.DateUnitType.MINUTE,e[4]),new a.DateControl.Set(o.DateUnitType.SECOND,e[5])])}}),new u({name:{jp:["${0}/${1}/${2}T${3}:${4}:${5}-${6}:${7}","${0}-${1}-${2}T${3}:${4}:${5}-${6}:${7}"]},parser:function(e,t){return r.DateUtility.dateFromSet(i.TimeZoneWrapper.fromHourMinutes("UTC-",e[6],e[7]),[new a.DateControl.Set(o.DateUnitType.YEAR,e[0]),new a.DateControl.Set(o.DateUnitType.MONTH,e[1]),new a.DateControl.Set(o.DateUnitType.DATE,e[2]),new a.DateControl.Set(o.DateUnitType.HOUR,e[3]),new a.DateControl.Set(o.DateUnitType.MINUTE,e[4]),new a.DateControl.Set(o.DateUnitType.SECOND,e[5])])}})]},867:function(e,t,n){var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.DateControl=t.Set=t.Add=void 0;var i=n(838),o=n(10),u=n(771),s=function(){function e(e,t){this.unit=e,this.value=t}return e.prototype.controlDate=function(e,t,n){var r=new Date(0);return r.setUTCMilliseconds(e+t),(r=n(r)).getTime()-t},e}(),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.apply=function(e,t){var n=this;return i.DateUnit.getDetail(this.unit).milliseconds>=1?e+i.DateUnit.toMilliseconds(this.value,this.unit):this.controlDate(e,t,(function(e){switch(n.unit){case i.DateUnitType.MONTH:e.setUTCMonth(e.getUTCMonth()+n.value);break;case i.DateUnitType.YEAR:e.setUTCFullYear(e.getUTCFullYear()+n.value)}return e}))},t.prototype.updateAccuracy=function(e){return e},t}(s);t.Add=c;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.apply=function(e,t){var n=this;return this.controlDate(e,t,(function(e){switch(n.unit){case i.DateUnitType.MONTH:var t=e.getUTCFullYear(),r=n.value-1;(a=u.DateUtility.maxDateInCalendar(t,r))<e.getUTCDate()&&e.setUTCDate(a),e.setUTCMonth(r);break;case i.DateUnitType.YEAR:var a,s=n.value,c=e.getUTCMonth();(a=u.DateUtility.maxDateInCalendar(s,c))<e.getUTCDate()&&e.setUTCDate(a),e.setUTCFullYear(n.value);break;case i.DateUnitType.DATE:e.setUTCDate(n.value);break;case i.DateUnitType.HOUR:e.setUTCHours(n.value);break;case i.DateUnitType.MINUTE:e.setUTCMinutes(n.value);break;case i.DateUnitType.SECOND:e.setUTCSeconds(n.value);break;case i.DateUnitType.MILLISECOND:e.setUTCMilliseconds(n.value);break;case i.DateUnitType.END_OF_MONTH:e.setUTCDate(u.DateUtility.maxDateInCalendar(e.getUTCFullYear(),e.getUTCMonth()));break;case i.DateUnitType.END_OF_YEAR:e.setUTCMonth(11),e.setUTCDate(31);break;case i.DateUnitType.WEEK_NUMBER:var p=new Date(e.getTime());p.setUTCDate(1),e.setUTCDate(u.DateUtility.dateFromWeekNumberAndWeekDay(o.WeekDayUnit.getWeekDay(p.getUTCDay()),o.WeekDayUnit.getWeekDay(e.getUTCDay()),n.value));break;case i.DateUnitType.YOUBI:e.setUTCDate(e.getUTCDate()+o.WeekDayUnit.getWeekDayDelta(e.getUTCDay(),n.value))}return e}))},t.prototype.updateAccuracy=function(e){var t=i.DateUnitType.UNKNOWN;switch(this.unit){case i.DateUnitType.YEAR:case i.DateUnitType.MONTH:case i.DateUnitType.DATE:case i.DateUnitType.HOUR:case i.DateUnitType.MINUTE:case i.DateUnitType.SECOND:case i.DateUnitType.MILLISECOND:t=this.unit;break;case i.DateUnitType.WEEK_NUMBER:case i.DateUnitType.YOUBI:case i.DateUnitType.END_OF_MONTH:case i.DateUnitType.END_OF_YEAR:t=i.DateUnitType.DATE;break;default:return e}return e>t?e:t},t}(s);t.Set=p,t.DateControl={Add:c,Set:p}},771:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DateUtility=void 0;var r=n(186),a=n(838),i=n(10),o=n(383),u=n(957),s=function(){function e(){}return e.nowEpoch=function(){return(new Date).getTime()},e.dateFromSet=function(t,n){var r=0,a=t.getTime();return n.forEach((function(e){r=e.apply(r,a)})),e.dateFromEpoch(r,t)},e.dateFromEpoch=function(e,t){return new r.DateWrapper(e,t.getTime(),a.DateUnitType.UNKNOWN)},e.maxDateInCalendar=function(e,t){var n=new Date(0);return n.setUTCFullYear(e),n.setUTCMonth(t+1),n.setUTCDate(0),n.getUTCDate()},e.dateFromWeekNumberAndWeekDay=function(e,t,n){var r=0,a=n;return a>=1&&(r+=t,a--),a>=1&&(r+=i.WeekDayType.Sat-i.WeekDayUnit.getWeekDay(e),a--),r+7*a},e.control=function(e,t){var n=e.getTime(!1),a=e.getTimeOffset(),i=e.getAccuracy();return t.forEach((function(e){n=e.apply(n,a),i=e.updateAccuracy(i)})),new r.DateWrapper(n,a,i)},e.format=function(e,t,n){for(var r="",a=function(e,t){return t<e.length?e[t]:null},s=0,c=0;c<t.length;c++){var p=a(t,c),l=a(t,c+1);if(l&&p==l)s++;else{switch(p){case"Y":r+=e.getFullYearString(s+1);break;case"w":r+=o.Wareki.parse(e);break;case"M":r+=e.getMonthString(s+1);break;case"d":r+=e.getDateString(s+1);break;case"H":r+=e.getHoursString(s+1);break;case"m":r+=e.getMinutesString(s+1);break;case"s":r+=e.getSecondsString(s+1);break;case"f":r+=e.getMillisecondsString(s+1);break;case"E":r+=i.WeekDayUnit.toWeekDayString(n.getLanguage(),e.getWeekDay());break;case"Z":r+=e.getTimeZoneString();break;case"p":r+=""+u.IntegerMath.divide(e.getTime(!0),1e3);break;case"P":r+=""+e.getTime(!0);break;default:r+=p}s=0}}return r},e}();t.DateUtility=s},186:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DateWrapper=void 0;var r=n(838),a=n(957),i=n(10),o=function(){function e(e,t,n){this.epoch_time_milliseconds=e,this.time_offset=t,this.accuracy=n,this.local_date=this.parseDateObject(this.epoch_time_milliseconds,t)}return e.prototype.parseDateObject=function(e,t){var n=new Date(0);return n.setUTCMilliseconds(e+t),n},e.prototype.parseDateObjectWithDate=function(e,t,n){var r=new Date(0);return r.setUTCFullYear(e),r.setUTCMonth(t),r.setUTCDate(n),r.getTime()},e.prototype.zeroPaddingString=function(e,t){for(var n="",r=new String(t),a=0;a<e;a++)n+="0";return(n+t).slice(-Math.max(r.length,e))},e.prototype.getAccuracy=function(){return this.accuracy},e.prototype.isEnoughAccuracy=function(e){switch(this.accuracy){case r.DateUnitType.UNKNOWN:default:return!0;case r.DateUnitType.YEAR:case r.DateUnitType.MONTH:case r.DateUnitType.DATE:case r.DateUnitType.HOUR:case r.DateUnitType.MINUTE:case r.DateUnitType.SECOND:case r.DateUnitType.MILLISECOND:return this.accuracy>=e}},e.prototype.getFullYear=function(){return this.isEnoughAccuracy(r.DateUnitType.YEAR)?this.local_date.getUTCFullYear():1900},e.prototype.getFullYearString=function(e){return this.zeroPaddingString(e,this.getFullYear())},e.prototype.getFullMonth=function(){return 12*this.getFullYear()+this.getMonth()},e.prototype.getMonth=function(){return this.isEnoughAccuracy(r.DateUnitType.MONTH)?this.local_date.getUTCMonth()+1:1},e.prototype.getMonthString=function(e){return this.zeroPaddingString(e,this.getMonth())},e.prototype.getDate=function(){return this.isEnoughAccuracy(r.DateUnitType.DATE)?this.local_date.getUTCDate():1},e.prototype.getDateString=function(e){return this.zeroPaddingString(e,this.getDate())},e.prototype.getHours=function(){return this.isEnoughAccuracy(r.DateUnitType.HOUR)?this.local_date.getUTCHours():0},e.prototype.getHoursString=function(e){return this.zeroPaddingString(e,this.getHours())},e.prototype.getMinutes=function(){return this.isEnoughAccuracy(r.DateUnitType.MINUTE)?this.local_date.getUTCMinutes():0},e.prototype.getMinutesString=function(e){return this.zeroPaddingString(e,this.getMinutes())},e.prototype.getSeconds=function(){return this.isEnoughAccuracy(r.DateUnitType.SECOND)?this.local_date.getUTCSeconds():0},e.prototype.getSecondsString=function(e){return this.zeroPaddingString(e,this.getSeconds())},e.prototype.getMilliseconds=function(){return this.isEnoughAccuracy(r.DateUnitType.MILLISECOND)?this.local_date.getUTCMilliseconds():0},e.prototype.getMillisecondsString=function(e){return this.zeroPaddingString(e,this.getMilliseconds())},e.prototype.getWeekDay=function(){return i.WeekDayUnit.getWeekDay(this.local_date.getUTCDay())},e.prototype.getTime=function(e){if(!e)return this.epoch_time_milliseconds;switch(this.accuracy){case r.DateUnitType.SECOND:case r.DateUnitType.MINUTE:case r.DateUnitType.HOUR:return a.IntegerMath.excludeRemain(this.epoch_time_milliseconds,r.DateUnit.getDetail(this.accuracy).milliseconds);case r.DateUnitType.DATE:case r.DateUnitType.MONTH:case r.DateUnitType.YEAR:return this.parseDateObjectWithDate(this.getFullYear(),this.getMonth(),this.getDate());default:return this.epoch_time_milliseconds}},e.prototype.getLocalDate=function(){return new Date(this.getTime(!0))},e.prototype.getWeekNumber=function(){return a.IntegerMath.divide(this.local_date.getUTCDate(),7)+1},e.prototype.getTimeZone=function(){var e=a.IntegerMath.divide(this.time_offset,6e4);return{prefix:this.time_offset<0?"-":"+",hour:a.IntegerMath.divide(e,60),minute:e%60}},e.prototype.getTimeZoneString=function(){var e=this.getTimeZone();return e.prefix+this.zeroPaddingString(2,Math.abs(e.hour))+":"+this.zeroPaddingString(2,Math.abs(e.minute))},e.prototype.getTimeOffset=function(){return this.time_offset},e}();t.DateWrapper=o},637:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ArrayExtend=void 0;var n=function(){function e(){}return e.insert=function(e,t,n){return e.splice(t,0,n)},e.first=function(e){if(null!=e&&null!=e&&0!=e.length)return e[0]},e.toMap=function(e){var t=new Map;return e&&e.forEach((function(e){t.set(e.key,e.value)})),t},e}();t.ArrayExtend=n},957:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.IntegerMath=void 0;var n=function(){function e(){}return e.divide=function(e,t){if(0==e||0==t)return 0;var n=Math.floor(e/t);return parseInt(""+n)},e.excludeRemain=function(e,t){return this.divide(e,t)*t},e}();t.IntegerMath=n},519:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(619));t.default=a.default}},t={};return function n(r){if(t[r])return t[r].exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}(519)}().default}));